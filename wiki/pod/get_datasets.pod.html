<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>get_datasets.pl</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:_postfix@neige.apple.com" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

-->


</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>get_datasets.pl</p>
<p>A script to collect genomic datasets from a Bioperl SeqFeature::Store db.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>get_datasets.pl [--options...] [&lt;filename&gt;]</p>
<pre>

  Options:
  --new
  --in &lt;filename&gt;
  --out filename
  --db &lt;name&gt;
  --feature &lt;type | type:source | alias, ...&gt;
  --dataset &lt;none | name, ...&gt;
  --method [mean|median|stddev|min|max|range|enumerate|count]
  --(no)log
  --strand [all | sense | antisense]
  --extend &lt;integer&gt;
  --start &lt;integer&gt;
  --stop &lt;integer&gt;
  --fstart &lt;decimal&gt;
  --fstop &lt;decimal&gt;
  --limit &lt;integer&gt;
  --pos [5 | 3 | m]
  --win &lt;integer&gt;
  --step &lt;integer&gt;
  --set_strand
  --(no)gz
  --help</pre>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<p>The command line flags and descriptions:</p>
<dl>
<dt><strong><a name="new" class="item">--new</a></strong>

<dd>
<p>Generate a new table of features. Overrides any specified input file.</p>
</dd>
</li>
<dt><strong><a name="in_filename" class="item">--in &lt;filename&gt;</a></strong>

<dd>
<p>Specify the file name of a previously generated feature dataset.
Required unless &quot;--new&quot; is specified. It should be in the tim data
format that is generated by this program and others, although other
tab-delimited text data formats may be usable. See the file
description below and in <code>tim_db_helper.pm</code>.</p>
</dd>
</li>
<dt><strong><a name="out_filename" class="item">--out &lt;filename&gt;</a></strong>

<dd>
<p>Specify the output file name. Required for new feature tables; optional for 
current files. If this is argument is not specified then the input file is 
overwritten.</p>
</dd>
</li>
<dt><strong><a name="db_name" class="item">--db &lt;name&gt;</a></strong>

<dd>
<p>Specify the name of the BioPerl gff database to use as source. This is required 
for new feature data files. For pre-existing input data files, this value 
may be obtained from the input file metadata. However, if provided, it 
overrides the database listed in the file; this is useful for collecting data 
from multiple databases.</p>
</dd>
</li>
<dt><strong><a name="feature_type_type_source_alias" class="item">--feature &lt;type | type:source | alias, ...&gt;</a></strong>

<dd>
<p>Specify the type of feature from which to collect values. This is required 
for new feature tables. Two types of values may be passed: either a specific 
feature type present in the database, or an alias to one or more features. 
The feature may be specified as either type or type:source. Aliases are 
specified in the <code>tim_db_helper.cfg</code> file, and provide a shortcut to a 
list of one or more features. More than feature may be included as a 
comma-delimited list (no spaces).</p>
</dd>
</li>
<dt><strong><a name="method_mean_median_stddev_min_max_range_enumerate_count" class="item">--method [mean, median, stddev, min, max, range, enumerate, count]</a></strong>

<dd>
<p>Specify the method for combining all of the dataset values within the 
genomic region of the feature. Accepted values include:</p>
</dd>
<dd>
<pre>

  - mean        (default)
  - median
  - stddev      Standard deviation of the population (within the region)
  - min
  - max
  - range       Returns 'min-max'
  - enumerate   Counts the number of features or dataset points
  - count       same as enumerate</pre>
</dd>
</li>
<dt><strong><a name="dataset_none_name" class="item">--dataset &lt;none | name, ...&gt;</a></strong>

<dd>
<p>Provide the name of the dataset to collect the values. Use this argument 
repeatedly for each dataset to be collected. Two or more datasets may be
merged into one by delimiting with an &quot;&amp;&quot; (no spaces!). If the dataset is not 
specified on the command line, then the program will interactively present a 
list of datasets from the database to select. To force the program to 
simply write out the list of collected features without collecting data, 
provide the dataset name of &quot;none&quot;.</p>
</dd>
</li>
<dt><strong><a name="no_log" class="item">--(no)log</a></strong>

<dd>
<p>Indicate the dataset is (not) in log2 space. The log2 status of the dataset is 
critical for accurately mathematically combining the dataset values in the 
feature's genomic region. It may be determined automatically if the dataset 
name includes the phrase &quot;log2&quot;.</p>
</dd>
</li>
<dt><strong><a name="strand_all_sense_antisense" class="item">--strand [all | sense | antisense]</a></strong>

<dd>
<p>Specify whether stranded data should be collected for each of the 
datasets. Either sense or antisense (relative to the feature) data 
may be collected. The default value is 'all', indicating all 
data will be collected.</p>
</dd>
</li>
<dt><strong><a name="extend_integer" class="item">--extend &lt;integer&gt;</a></strong>

<dd>
<p>Optionally specify the bp extension that will be added to both sides of the 
feature's region.</p>
</dd>
</li>
<dt><strong><a name="start_integer" class="item">--start &lt;integer&gt;</a></strong>

<dd>
<p>Optionally specify the start position of the region to collect values relative 
to the feature start. Prefix a negative sign to specify 
an upstream position. Specify a negative value on the command line with an 
equals sign, e.g. &quot;--start=-300'. Must be combined with &quot;--stop&quot;.</p>
</dd>
</li>
<dt><strong><a name="stop_integer" class="item">--stop &lt;integer&gt;</a></strong>

<dd>
<p>Optionally specify the stop position of the region to collect values relative 
to the feature start. Must be combined with &quot;--start&quot;.</p>
</dd>
</li>
<dt><strong><a name="fstart_number" class="item">--fstart &lt;number&gt;</a></strong>

<dd>
<p>Optionally specify the fractional start position of the region to collect 
values relative to the feature start (or end if specified). The fraction is 
based on the feature's region length. The fraction should be presented as a 
decimal number, e.g. 0.25. Prefix a negative sign to specify an upstream 
position. Must be combined with &quot;--fstop&quot;.</p>
</dd>
</li>
<dt><strong><a name="fstop_number" class="item">--fstop &lt;number&gt;</a></strong>

<dd>
<p>Optionally specify the fractional stop position of the region to collect 
values relative to the feature start (or end if specified). The fraction is 
based on the feature's region length. The fraction should be presented as a 
decimal number, e.g. 0.25. A value &gt; 1 would include the region downstream 
of the feature. Must be combined with &quot;--fstart&quot;.</p>
</dd>
</li>
<dt><strong><a name="limit_integer" class="item">--limit &lt;integer&gt;</a></strong>

<dd>
<p>Optionally specify the minimum size limit for subfractionating a feature's 
region. Used in combination with fstart and fstop to prevent taking a 
subregion from a region too small to support it. The default is 1000 bp.</p>
</dd>
</li>
<dt><strong><a name="pos_5_3_m" class="item">--pos [5 | 3 | m]</a></strong>

<dd>
<p>Indicate the relative position of the feature with which the 
data is collected when combined with the &quot;start&quot; and &quot;stop&quot; or &quot;fstart&quot; 
and &quot;fstop&quot; options. Three values are accepted: &quot;5&quot; indicates the 
5' prime end is used, &quot;3&quot; indicates the 3' end is used, and &quot;m&quot; or &quot;1&quot; 
indicates the middle of the feature is used. The default is to 
use the 5' end, or the start position of unstranded features.</p>
</dd>
</li>
<dt><strong><a name="win_integer" class="item">--win &lt;integer&gt;</a></strong>

<dd>
<p>When generating a new genome interval list, optionally specify the window 
size. The default size is defined in the configuration file, 
tim_db_helper.cfg.</p>
</dd>
</li>
<dt><strong><a name="step_integer" class="item">--step &lt;integer&gt;</a></strong>

<dd>
<p>Optionally indicate the step size when generating a new list of intervals 
across the genome. The default is equal to the window size.</p>
</dd>
</li>
<dt><strong><a name="set_strand" class="item">--set_strand</a></strong>

<dd>
<p>For features that are not inherently stranded (strand value of 0), 
impose an artificial strand for each feature (1 or -1). This will 
have the effect of enforcing a relative orientation for each feature, 
or to collected stranded data. This requires the presence a 
column in the input data file with a name of &quot;strand&quot;. Hence, it 
will not work with newly generated datasets, but only with input 
data files. Default is false.</p>
</dd>
</li>
<dt><strong><a name="no_gz" class="item">--(no)gz</a></strong>

<dd>
<p>Indicate whether the output file should (not) be compressed by gzip. 
If compressed, the extension '.gz' is appended to the filename. If a compressed 
file is opened, the compression status is preserved unless specified otherwise.</p>
</dd>
</li>
<dt><strong><a name="help" class="item">--help</a></strong>

<dd>
<p>Display the complete POD documentation for this program.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This program will collect dataset values from a Bioperl SeqFeature::Store 
formatted database.
It will generate a list of genomic features or intervals, collect values from 
one or more datasets for each feature, and write out a data file. Previous 
data files may be re-loaded and additional datasets added to the list of 
features.</p>
<p>At each feature or interval, multiple data points within the genomic segment 
are combined mathematically and reported as a single value for the feature. 
The method for combining datapoints may be specified; the default method is 
the mean of all datapoints.</p>
<p>Datasets in the database to be collected may be chosen interactively from a list 
for convenience. Alternatively, the datasets may be specified upon execution 
at the command line. The program is designed to be run completely without 
interaction, allowing for convenient usage within a shell script.</p>
<p>The output file is a standard tim data formatted file, a tab delimited 
file format with each row a genomic feature and each column a dataset. 
Metadata regarding the datasets are stored in comment lines at the beginning 
of the file. The file may be gzipped.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<pre>
 Timothy J. Parnell, PhD
 Howard Hughes Medical Institute
 Dept of Oncological Sciences
 Huntsman Cancer Institute
 University of Utah
 Salt Lake City, UT, 84112

</pre>
<p>This package is free software; you can redistribute it and/or modify
it under the terms of the GPL (either version 1, or at your option,
any later version) or the Artistic License 2.0.</p>

</body>

</html>
